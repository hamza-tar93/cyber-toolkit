<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyber Toolkit - Encoders & Decoders</title>
    <!-- Tailwind CSS for rapid UI development -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts for modern typography -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    <!-- Custom Styles for the enhanced UI -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0a0e1a;
            /* Aurora background effect */
            background-image: radial-gradient(at 27% 37%, hsla(215, 98%, 61%, 0.1) 0px, transparent 50%),
                              radial-gradient(at 97% 21%, hsla(125, 98%, 72%, 0.1) 0px, transparent 50%),
                              radial-gradient(at 52% 99%, hsla(355, 98%, 71%, 0.1) 0px, transparent 50%);
        }
        /* Use a monospace font for code-like text areas */
        textarea, select {
            font-family: 'Fira Code', monospace;
        }
        /* A subtle animation for feedback */
        .animate-flash {
            animation: flash 0.5s ease-out;
        }
        @keyframes flash {
            0% { background-color: rgba(22, 163, 74, 0.3); } /* Green flash */
            100% { background-color: transparent; }
        }
        /* Gradient text for the header */
        .gradient-text {
            background: linear-gradient(to right, #34d399, #60a5fa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
    </style>
</head>
<!-- 
    ** MOBILE FIX **
    - `items-start`: Aligns content to the top on mobile.
    - `md:items-center`: Re-centers content on larger screens.
    - `pb-12`: Adds padding to the bottom of the body to ensure content can scroll up past the bottom edge.
-->
<body class="flex items-start justify-center min-h-screen p-4 sm:p-6 md:items-center md:p-8 pb-12">

    <!-- Main container with glassmorphism effect -->
    <div class="w-full max-w-4xl bg-gray-900/50 backdrop-blur-xl border border-gray-700/50 rounded-2xl shadow-2xl p-6 md:p-8">
        
        <!-- Header Section -->
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold gradient-text">Cyber Toolkit</h1>
            <p class="text-gray-400 mt-2">Client-side encoders, decoders, and hashers for developers & security researchers.</p>
        </header>

        <!-- Input/Output Text Areas -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Input Area -->
            <div class="flex flex-col">
                <label for="input" class="mb-2 font-semibold text-gray-300">Input</label>
                <!-- **FIX 1: Mobile Readability** Added `text-gray-200` class -->
                <textarea id="input" rows="6" class="w-full p-3 bg-gray-900/70 border-2 border-gray-700 rounded-lg focus:outline-none focus:border-emerald-500 transition duration-300 text-gray-200" placeholder="Type or paste your text here..."></textarea>
            </div>

            <!-- Output Area -->
            <div class="flex flex-col">
                <label for="output" class="mb-2 font-semibold text-gray-300">Output</label>
                <!-- **FIX 1: Mobile Readability** Added `text-gray-200` class -->
                <textarea id="output" rows="6" class="w-full p-3 bg-gray-900/70 border-2 border-gray-700 rounded-lg focus:outline-none text-gray-200" readonly placeholder="Result will appear here..."></textarea>
            </div>
        </div>

        <!-- Controls Section -->
        <div class="mt-6 flex flex-col md:flex-row items-center gap-4">
            <!-- Mode Selector Dropdown -->
            <div class="w-full md:w-1/3">
                <label for="mode" class="sr-only">Mode</label>
                <!-- **FIX 2: Dropdown Readability** Removed <optgroup> for cross-browser compatibility -->
                <select id="mode" class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 transition text-gray-200">
                    <option value="url-encode">URL Encode</option>
                    <option value="url-decode">URL Decode</option>
                    <option value="base64-encode">Base64 Encode</option>
                    <option value="base64-decode">Base64 Decode</option>
                    <option value="html-encode">HTML Entities Encode</option>
                    <option value="html-decode">HTML Entities Decode</option>
                    <option value="hex-encode">Hex Encode</option>
                    <option value="hex-decode">Hex Decode</option>
                    <option value="binary-encode">Binary Encode</option>
                    <option value="binary-decode">Binary Decode</option>
                    <option value="rot13">ROT13 Cipher</option>
                    <option disabled>--- Hashing ---</option>
                    <option value="md5">MD5</option>
                    <option value="sha1">SHA-1</option>
                    <option value="sha256">SHA-256</option>
                    <option value="sha512">SHA-512</option>
                </select>
            </div>
            
            <!-- Action Buttons -->
            <div class="w-full md:w-auto flex-grow flex items-center gap-4">
                <button id="transform-btn" class="w-full md:w-auto flex-grow bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-3 px-6 rounded-lg transition duration-300 shadow-lg shadow-emerald-900/50">
                    Transform
                </button>
                <button id="swap-btn" title="Swap Input/Output" class="p-3 bg-gray-700 hover:bg-gray-600 rounded-lg transition duration-300">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4" /></svg>
                </button>
                <button id="copy-btn" title="Copy Output" class="p-3 bg-gray-700 hover:bg-gray-600 rounded-lg transition duration-300">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" /></svg>
                </button>
            </div>
        </div>
        
        <!-- External script for SHA hashing algorithms. This is necessary because these are not native to browser JavaScript. -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
        
        <script>
            // --- 1. DOM Element Selection ---
            // Get references to all the interactive elements on the page we need to work with.
            const inputEl = document.getElementById('input');
            const outputEl = document.getElementById('output');
            const modeEl = document.getElementById('mode');
            const transformBtn = document.getElementById('transform-btn');
            const swapBtn = document.getElementById('swap-btn');
            const copyBtn = document.getElementById('copy-btn');

            // --- 2. Core Transformation Logic ---
            // This object holds all the functions for encoding, decoding, and hashing.
            // Each key matches a 'value' from the dropdown selector.
            const transformations = {
                // URL Encoding: Makes strings safe for URLs.
                'url-encode': (str) => encodeURIComponent(str),
                'url-decode': (str) => decodeURIComponent(str),
                
                // Base64: Represents binary data as ASCII text.
                // We use a trick to correctly handle UTF-8 characters that are common on the web.
                'base64-encode': (str) => btoa(unescape(encodeURIComponent(str))),
                'base64-decode': (str) => decodeURIComponent(escape(atob(str))),
                
                // HTML Entities: Prevents text from being interpreted as HTML code.
                'html-encode': (str) => {
                    const div = document.createElement('div');
                    div.textContent = str; // Browser safely converts text to entities
                    return div.innerHTML;
                },
                'html-decode': (str) => {
                    const textarea = document.createElement('textarea');
                    textarea.innerHTML = str; // Browser safely converts entities back to text
                    return textarea.value;
                },
                
                // Hexadecimal: Represents each character as its hex value.
                'hex-encode': (str) => {
                    let hex = '';
                    for (let i = 0; i < str.length; i++) {
                        hex += '' + str.charCodeAt(i).toString(16);
                    }
                    return hex;
                },
                'hex-decode': (str) => {
                    let txt = '';
                    // Process the string in chunks of 2 characters (one hex byte)
                    for (let i = 0; i < str.length; i += 2) {
                        txt += String.fromCharCode(parseInt(str.substr(i, 2), 16));
                    }
                    return txt;
                },

                // Binary: Represents each character as its 8-bit binary value.
                'binary-encode': (str) => {
                    return str.split('').map(char => {
                        return char.charCodeAt(0).toString(2).padStart(8, '0'); // padStart ensures it's always 8 bits
                    }).join(' ');
                },
                'binary-decode': (str) => {
                    return str.split(' ').map(bin => {
                        return String.fromCharCode(parseInt(bin, 2));
                    }).join('');
                },
                
                // ROT13: A simple substitution cipher for fun/obfuscation.
                'rot13': (str) => str.replace(/[a-zA-Z]/g, c => String.fromCharCode(c.charCodeAt(0) + (c.toLowerCase() < 'n' ? 13 : -13))),
                
                // Hashing Functions (from the imported CryptoJS library)
                'md5': (str) => CryptoJS.MD5(str).toString(),
                'sha1': (str) => CryptoJS.SHA1(str).toString(),
                'sha256': (str) => CryptoJS.SHA256(str).toString(),
                'sha512': (str) => CryptoJS.SHA512(str).toString(),
            };

            // --- 3. Main Function ---
            // This function is called whenever a transformation needs to happen.
            function handleTransform() {
                const inputText = inputEl.value;
                const mode = modeEl.value;
                
                // If there's no input, clear the output.
                if (!inputText) {
                    outputEl.value = '';
                    return;
                }

                // A try...catch block prevents the app from crashing if the input is invalid for a specific operation (e.g., bad Base64).
                try {
                    const transformFunction = transformations[mode];
                    if (transformFunction) {
                        outputEl.value = transformFunction(inputText);
                    } else {
                        outputEl.value = 'Error: Unknown transformation.';
                    }
                } catch (e) {
                    console.error('Transformation Error:', e);
                    outputEl.value = `Error: ${e.message}. Invalid input for this operation.`;
                }
            }

            // --- 4. Event Listeners ---
            // These connect our functions to user actions.

            // When the "Transform" button is clicked.
            transformBtn.addEventListener('click', handleTransform);
            
            // For a live experience, also transform text as the user types or changes the mode.
            inputEl.addEventListener('input', handleTransform);
            modeEl.addEventListener('change', handleTransform);

            // When the "Swap" button is clicked.
            swapBtn.addEventListener('click', () => {
                // Swap the text between the input and output boxes.
                const temp = inputEl.value;
                inputEl.value = outputEl.value;
                outputEl.value = temp;
                
                // Provide visual feedback for the swap action.
                inputEl.classList.add('animate-flash');
                outputEl.classList.add('animate-flash');
                setTimeout(() => {
                    inputEl.classList.remove('animate-flash');
                    outputEl.classList.remove('animate-flash');
                }, 500);
                
                // After swapping, re-run the transformation on the new input.
                handleTransform();
            });

            // When the "Copy" button is clicked.
            copyBtn.addEventListener('click', () => {
                if (!outputEl.value) return; // Don't copy if there's nothing to copy.
                
                // Use the modern Clipboard API for a secure copy action.
                navigator.clipboard.writeText(outputEl.value).then(() => {
                    // Provide visual feedback that the text was copied.
                    const originalHTML = copyBtn.innerHTML;
                    copyBtn.innerHTML = '<span class="text-emerald-400">Copied!</span>';
                    setTimeout(() => {
                        copyBtn.innerHTML = originalHTML;
                    }, 2000);
                }).catch(err => {
                    // Log an error if copying fails (e.g., due to browser permissions).
                    console.error('Failed to copy text: ', err);
                });
            });

            // --- 5. Initial Call ---
            // Run the transformation once when the page loads, in case there's pre-filled text.
            handleTransform();
        </script>
    </div>

</body>
</html>
